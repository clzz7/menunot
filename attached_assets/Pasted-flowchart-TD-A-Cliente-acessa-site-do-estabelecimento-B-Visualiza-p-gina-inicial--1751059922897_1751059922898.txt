flowchart TD
   A[ðŸ  Cliente acessa site do estabelecimento] --> B[ðŸ“± Visualiza pÃ¡gina inicial]
   
   B --> C{ðŸ• Navega pelo cardÃ¡pio}
   C --> D[ðŸ‘ï¸ Visualiza categoria]
   D --> E[ðŸ›’ Seleciona produto]
   
   E --> F{âš™ï¸ Produto tem opÃ§Ãµes?}
   F -->|Sim| G[ðŸŽ›ï¸ Modal personalizaÃ§Ã£o]
   F -->|NÃ£o| H[ðŸ“ Campo observaÃ§Ãµes]
   
   G --> I[âœ… Confirma opÃ§Ãµes]
   I --> H
   H --> J[âž• Adiciona ao carrinho]
   
   J --> K{ðŸ›ï¸ Continuar comprando?}
   K -->|Sim| C
   K -->|NÃ£o| L[ðŸ›’ Visualiza carrinho]
   
   C --> M[ðŸ” Busca produto especÃ­fico]
   M --> E
   
   L --> N{ðŸ“‹ Carrinho tem itens?}
   N -->|NÃ£o| O[âŒ Carrinho vazio - volta ao cardÃ¡pio]
   O --> C
   
   N -->|Sim| P[âœï¸ Pode editar quantidades]
   P --> Q[ðŸ—‘ï¸ Pode remover itens]
   Q --> R[ðŸ’° Visualiza subtotal]
   R --> S[ðŸšš Finalizar pedido]
   
   S --> T[ðŸ“‹ FormulÃ¡rio de checkout]
   T --> U[ðŸ“ž Insere WhatsApp]
   
   U --> V{ðŸ” WhatsApp existe no BD?}
   V -->|Sim| W[âœ¨ Preenche dados automaticamente]
   V -->|NÃ£o| X[ðŸ“ Campos vazios para preencher]
   
   W --> Y[âœï¸ Cliente pode editar dados preenchidos]
   Y --> Z[ðŸ“ Confirma/edita endereÃ§o]
   X --> AA[ðŸ‘¤ Preenche nome completo]
   
   AA --> AB[ðŸ“ Preenche endereÃ§o completo]
   AB --> Z
   
   Z --> AC[ðŸ’³ Seleciona forma de pagamento]
   AC --> AD{ðŸ’° Tipo de pagamento?}
   
   AD -->|PIX/CartÃ£o Online| AE[ðŸ’» Processo pagamento online]
   AD -->|Dinheiro/CartÃ£o na entrega| AF[ðŸ  Pagamento na entrega]
   
   AE --> AG{âœ… Pagamento aprovado?}
   AG -->|NÃ£o| AH[âŒ Erro pagamento]
   AH --> AI[ðŸ”„ Tentar novamente]
   AI --> AC
   
   AG -->|Sim| AJ[âœ… Pagamento confirmado]
   AF --> AJ
   
   AJ --> AK[ðŸŽŸï¸ Campo cupom de desconto]
   AK --> AL{ðŸ·ï¸ Inseriu cupom?}
   AL -->|Sim| AM{âœ… Cupom vÃ¡lido?}
   AM -->|NÃ£o| AN[âŒ Erro: cupom invÃ¡lido]
   AN --> AK
   AM -->|Sim| AO[ðŸ’° Aplica desconto]
   AL -->|NÃ£o| AP[ðŸ’° Calcula total final]
   AO --> AP
   
   AP --> AQ[ðŸ“ Campo observaÃ§Ãµes do pedido]
   AQ --> AR[â±ï¸ Mostra tempo estimado]
   AR --> AS[ðŸ“‹ Resumo final do pedido]
   AS --> AT[âœ… Confirmar pedido]
   
   AT --> AU[ðŸŽŠ Pedido confirmado!]
   AU --> AV[ðŸ“± PÃ¡gina "Meus Pedidos"]
   
   AV --> AW[ðŸ“Š Aba "Pedido Atual"]
   AW --> AX[â±ï¸ Status em tempo real]
   AX --> AY{ðŸ“± Status do pedido}
   
   AY -->|Confirmado| AZ[âœ… Pedido confirmado pelo restaurante]
   AY -->|Preparando| BA[ðŸ‘¨â€ðŸ³ Pedido em preparo]
   AY -->|Pronto| BB[ðŸ• Pedido pronto]
   AY -->|Saiu para entrega| BC[ðŸš— Pedido saiu para entrega]
   AY -->|Entregue| BD[âœ… Pedido entregue]
   
   AZ --> BE[ðŸ”„ Aguarda atualizaÃ§Ã£o]
   BA --> BE
   BB --> BE
   BC --> BE
   BE --> AY
   
   BD --> BF[â­ OpÃ§Ã£o avaliar pedido]
   BF --> BG{â­ Quer avaliar?}
   BG -->|Sim| BH[â­ Seleciona nota 1-5]
   BH --> BI[ðŸ’¬ ComentÃ¡rio opcional]
   BI --> BJ[âœ… Envia avaliaÃ§Ã£o]
   BG -->|NÃ£o| BK[ðŸ“± Continua na pÃ¡gina]
   BJ --> BK
   
   AV --> BL[ðŸ“Š Aba "HistÃ³rico"]
   BL --> BM[ðŸ“‹ Lista pedidos anteriores]
   BM --> BN[ðŸ‘ï¸ Ver detalhes pedido antigo]
   BN --> BO[ðŸ”„ Repetir pedido]
   BO --> BQ{ðŸ›’ Adicionar ao carrinho atual?}
   BQ -->|Sim| BR[âž• Itens adicionados]
   BR --> L
   BQ -->|NÃ£o| BS[ðŸ—‘ï¸ Limpa carrinho atual]
   BS --> BT[ðŸ”„ Substitui por pedido antigo]
   BT --> L
   
   BK --> BU{ðŸ”„ Quer fazer novo pedido?}
   BU -->|Sim| C
   BU -->|NÃ£o| BV[ðŸ‘‹ Finaliza sessÃ£o]
   
   %% Estados de erro e validaÃ§Ãµes
   T --> BW{âŒ Campos obrigatÃ³rios?}
   BW -->|Faltando| BX[âš ï¸ Mostra campos obrigatÃ³rios]
   BX --> T
   BW -->|OK| U
   
   AC --> BY{ðŸ• Estabelecimento aberto?}
   BY -->|NÃ£o| BZ[âŒ Erro: estabelecimento fechado]
   BZ --> CA[â„¹ï¸ Mostra horÃ¡rios de funcionamento]
   BY -->|Sim| AD
   
   AP --> CB{ðŸ’° Pedido mÃ­nimo atingido?}
   CB -->|NÃ£o| CC[âŒ Erro: valor mÃ­nimo nÃ£o atingido]
   CC --> L
   CB -->|Sim| AQ
   
   %% InteraÃ§Ãµes extras
   B --> CD[â„¹ï¸ Ver informaÃ§Ãµes do estabelecimento]
   CD --> CE[ðŸ“ž Telefone, endereÃ§o, horÃ¡rios]
   CE --> B
   
   L --> CF[ðŸŽŸï¸ Campo cupom no carrinho]
   CF --> CG{ðŸ·ï¸ Cupom vÃ¡lido?}
   CG -->|Sim| CH[ðŸ’°uÃ§Ã£o no subtotal]
   CG -->|NÃ£o| CI[âŒ Mensagem erro cupom]
   CH --> L
   CI --> L
   
   %% Responsividade e navegaÃ§Ã£o
   B --> CJ[ðŸ”„ Atualiza pÃ¡gina]
   CJ --> B
   
   L --> CK[ðŸ”™ Voltar ao cardÃ¡pio]
   CK --> C
   
   AV --> CL[ðŸ”™ Fazer novo pedido]
   CL --> C
   
   %% NotificaÃ§Ãµes
   AX --> CM{ðŸ”” NotificaÃ§Ãµes ativas?}
   CM -->|Sim| CN[ðŸ“± Push notification mudanÃ§a status]
   CM -->|NÃ£o| BE
   CN --> BE
   
   style A fill:#e1f5fe
   style AU fill:#c8e6c9
   style BD fill:#4caf50
   style BZ fill:#ffcdd2
   style AH fill:#ffcdd2
   style AN fill:#ffcdd2
   style CC fill:#ffcdd2